{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/jaidharosenblatt/Desktop/TutorEDU/frontend/gui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jaidharosenblatt/Desktop/TutorEDU/frontend/gui/src/SignIn.js\";\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  height: 44px;\\n  width: 160px;\\n  border: 2px solid #D9E2FF;\\n  border-radius: 4px;\\n  font-family: Avenir-Heavy;\\n  font-size: 12px;\\n  color: #1C3A9F;\\n  letter-spacing: 0;\\n  text-align: center;\\n  justifyContent: center;\\n  alignItems: center;\\n  margin-top: 12px;\\n\\n  :hover {\\n    color: white;\\n    border: 0px;\\n    background-color: #1C3A9F;\\n  }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  height: 44px;\\n  width: 160px;\\n  background-color: #1C3A9F;\\n  border-radius: 4px;\\n  font-family: Avenir-Heavy;\\n  font-size: 12px;\\n  color: white;\\n  letter-spacing: 0;\\n  text-align: center;\\n  justifyContent: center;\\n  alignItems: center;\\n  margin-top: 36px;\\n  margin-right: 12px;\\n\\n  :hover {\\n    color: white;\\n    border: 0px;\\n    background-color: #1C3A9F;\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport './styles.css';\nimport styled from 'styled-components';\nimport axios from \"axios\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport background from './images/duke.png';\nconst PrimaryButton = styled.button(_templateObject());\nconst SecondaryButton = styled.button(_templateObject2());\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: localStorage.getItem('token') ? true : false,\n      username: '',\n      user: null\n    };\n    this.handleLogin = this.handleLogin.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.isLoggedIn) {\n      this.getCurrentUser();\n    }\n  }\n\n  getCurrentUser() {\n    var config = {\n      headers: {\n        'Authorization': \"JWT \".concat(localStorage.getItem('token'))\n      }\n    };\n    axios.get('http://127.0.0.1:8000/api/current-user/', config).then(res => {\n      console.log(res);\n      this.setState({\n        user: res.data\n      });\n    });\n  }\n\n  handleLogin() {\n    const credentials = {\n      username: document.getElementById('username').value,\n      password: document.getElementById('password').value\n    };\n    this.state = {\n      hasError: false\n    };\n    axios.post('http://127.0.0.1:8000/api/get-token/', credentials).then(response => {\n      console.log(response);\n\n      if (response.data.token !== undefined) {\n        localStorage.setItem('token', response.data.token);\n        this.setState({\n          isLoggedIn: true\n        });\n        this.refreshToken();\n      }\n    }).catch(function (error) {\n      console.log(error);\n      return {\n        hasError: true\n      };\n    });\n  }\n\n  refreshToken() {\n    axios.post('http://127.0.0.1:8000/api/refresh-token/', {\n      token: localStorage.getItem('token')\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.token !== undefined) {\n        localStorage.setItem('token', response.data.token);\n        this.setState({\n          isLoggedIn: true\n        });\n        window.location.reload();\n        let history = this.props.history;\n        history.push({\n          pathname: '/'\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  handleLogout() {\n    localStorage.removeItem('token');\n    this.setState({\n      isLoggedIn: false\n    });\n    window.location.reload();\n  }\n\n  render() {\n    const signInView = React.createElement(\"div\", {\n      className: \"signin-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"signin-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(\"p\", {\n      className: \"signin-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      className: \"signin-input-box\",\n      id: \"username\",\n      type: \"text\",\n      placeholder: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"signin-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      className: \"signin-input-box\",\n      id: \"password\",\n      type: \"password\",\n      placeholder: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(PrimaryButton, {\n      onClick: () => {\n        this.handleLogin();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Sign In\"), React.createElement(Link, {\n      to: {\n        pathname: \"/signup/\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(SecondaryButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Sign Up\"))));\n    const signOutView = React.createElement(\"div\", {\n      className: \"signin-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"signin-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Hi \", this.state.user !== null ? this.state.user.name : \"there\", \"!\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Are you sure you want to log out?\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(PrimaryButton, {\n      onClick: () => {\n        this.handleLogout();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Logout\")));\n    return React.createElement(\"div\", {\n      className: \"signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"signin-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"signin-background\",\n      src: background,\n      alt: \"Duke University campus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), this.state.isLoggedIn ? signOutView : signInView);\n  }\n\n}\n\nexport default withRouter(SignIn);","map":{"version":3,"sources":["/Users/jaidharosenblatt/Desktop/TutorEDU/frontend/gui/src/SignIn.js"],"names":["React","Component","styled","axios","Link","withRouter","background","PrimaryButton","button","SecondaryButton","SignIn","constructor","props","state","isLoggedIn","localStorage","getItem","username","user","handleLogin","bind","componentDidMount","getCurrentUser","config","headers","get","then","res","console","log","setState","data","credentials","document","getElementById","value","password","hasError","post","response","token","undefined","setItem","refreshToken","catch","error","window","location","reload","history","push","pathname","handleLogout","removeItem","render","signInView","signOutView","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './styles.css';\nimport styled from 'styled-components';\nimport axios from \"axios\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport background from './images/duke.png'\n\nconst PrimaryButton = styled.button`\n  height: 44px;\n  width: 160px;\n  background-color: #1C3A9F;\n  border-radius: 4px;\n  font-family: Avenir-Heavy;\n  font-size: 12px;\n  color: white;\n  letter-spacing: 0;\n  text-align: center;\n  justifyContent: center;\n  alignItems: center;\n  margin-top: 36px;\n  margin-right: 12px;\n\n  :hover {\n    color: white;\n    border: 0px;\n    background-color: #1C3A9F;\n  }\n`;\n\nconst SecondaryButton = styled.button`\n  height: 44px;\n  width: 160px;\n  border: 2px solid #D9E2FF;\n  border-radius: 4px;\n  font-family: Avenir-Heavy;\n  font-size: 12px;\n  color: #1C3A9F;\n  letter-spacing: 0;\n  text-align: center;\n  justifyContent: center;\n  alignItems: center;\n  margin-top: 12px;\n\n  :hover {\n    color: white;\n    border: 0px;\n    background-color: #1C3A9F;\n  }\n`;\n\nclass SignIn extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: localStorage.getItem('token') ? true : false,\n      username: '',\n      user: null,\n    };\n\n    this.handleLogin = this.handleLogin.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.isLoggedIn) {\n      this.getCurrentUser()\n    }\n  }\n\n  getCurrentUser() {\n    var config = {\n      headers: {'Authorization': `JWT ${localStorage.getItem('token')}`}\n    };\n\n    axios\n      .get('http://127.0.0.1:8000/api/current-user/', config)\n      .then(res => {\n        console.log(res);\n        this.setState({\n          user: res.data,\n        })\n      })\n  }\n\n  handleLogin() {\n\n    const credentials = {\n      username: document.getElementById('username').value,\n      password: document.getElementById('password').value\n    }\n    this.state = { hasError: false };\n\n    axios.post('http://127.0.0.1:8000/api/get-token/', credentials)\n      .then((response) => {\n        console.log(response);\n        if (response.data.token !== undefined) {\n          localStorage.setItem('token', response.data.token);\n          this.setState({\n              isLoggedIn: true,\n            });\n            this.refreshToken()\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n        return { hasError: true };\n      });\n  }\n\n  refreshToken() {\n    axios.post('http://127.0.0.1:8000/api/refresh-token/', { token: localStorage.getItem('token') })\n      .then((response) => {\n        console.log(response);\n        if (response.data.token !== undefined) {\n          localStorage.setItem('token', response.data.token);\n          this.setState({\n              isLoggedIn: true,\n            });\n\n            window.location.reload()\n            let { history } = this.props;\n            history.push({\n             pathname: '/',\n            });\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n  }\n\n  handleLogout() {\n    localStorage.removeItem('token');\n    this.setState({ isLoggedIn: false });\n    window.location.reload();\n  }\n\n  render() {\n  \n    const signInView =\n      <div className=\"signin-right\">\n        <h2 className=\"signin-title\">Sign in</h2>\n        <p className=\"signin-input\">Username</p>\n        <input className=\"signin-input-box\" id=\"username\" type=\"text\" placeholder=\"\">\n        </input>\n        <p className=\"signin-input\">Password</p>\n        <input className=\"signin-input-box\" id=\"password\" type=\"password\" placeholder=\"\">\n        </input>\n        <div>\n          <PrimaryButton onClick={() => {this.handleLogin()}}>Sign In</PrimaryButton>\n          <Link to={{ pathname: \"/signup/\" }}>\n            <SecondaryButton>Sign Up</SecondaryButton>\n          </Link>\n        </div>\n      </div>\n\n    const signOutView =\n      <div className=\"signin-right\">\n        <h2 className=\"signin-title\">Hi { this.state.user !== null ? this.state.user.name : \"there\"}!</h2>\n        <p>Are you sure you want to log out?</p>\n        <div>\n          <PrimaryButton onClick={() => {this.handleLogout()}}>Logout</PrimaryButton>\n        </div>\n      </div>\n\n    return (\n      <div className=\"signin\">\n        <div className=\"signin-left\">\n          <img className=\"signin-background\" src={background} alt=\"Duke University campus\"/>\n        </div>\n        {this.state.isLoggedIn ? signOutView : signInView}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}